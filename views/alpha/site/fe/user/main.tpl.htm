<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta content="width=device-width,user-scalable=no,initial-scale=1.0" name="viewport">
    <base href="/" />
    <title><?php echo APP_TITLE;?>——用户主页</title>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="<?php echo auto_version('/static/css/site.fe.css');?>" rel="stylesheet">
    <link href="<?php echo auto_version('/views/alpha/site/fe/user/main.css');?>" rel="stylesheet">
</head>

<body ng-controller='ctrlMain' class="ng-cloak" ng-cloak>
    <div class="loading">
        <div class='loading-indicator'><i></i></div>
    </div>
    <nav class='navbar site-navbar-default navbar-fixed-top visible-xs'>
        <div class='container-fluid text-right'>
            <p class="navbar-text"></p>
        </div>
    </nav>
    <nav class='navbar site-navbar-alpha main hidden-xs'>
        <div class='container'>
            <div class="navbar-header">
                <a href class="navbar-brand">
                    <img src="../../../../../../static/img/alpha/logo.png" >
                </a>
            </div>
            <ul class="nav navbar-nav navbar-right">
                <li><a href ng-click="gotoBack()">返回</a></li>
            </ul>
        </div>
    </nav>
    <div class="container content">
        <div class='avatar'>
            <div class='headimg' ng-if="user.loginExpire" tms-image-input="Y" ng-click="changeHeadImg()" >
                <img ng-src="{{user.headimgurl}}">
                <span class='img-edit'><i class='glyphicon glyphicon-edit'></i> 上传新头像</span>
            </div>
            <div class='headimg' ng-if="!user.loginExpire" ><img ng-src="{{user.headimgurl}}" ></div>
            <div class='nickname' ng-bind="user.nickname"></div>
        </div>
        <div class='list-group'>
            <a href='' class='list-group-item' ng-click="toggleUserSetting($event)">个人设置
                <div ng-if="userSetting">
                    <hr>
                    <div class='form-group'>
                        <input type='text' class='form-control input-lg' name='nickname' ng-model="user.nickname" placeholder='用户昵称'>
                    </div>
                    <div class='form-group'>
                        <button class="btn btn-lg btn-block btn-success" ng-click="changeNickname()">修改昵称</button>
                    </div>
                    <hr>
                    <div class='form-group'>
                        <input type='password' class='form-control input-lg' name='password' ng-model="user.password" ng-minlength='6' ng-maxlength='16' placeholder='输入6-16位登录密码'>
                    </div>
                    <div class='form-group'>
                        <input type='password' class='form-control input-lg' ng-pattern="repeatPwd" name='password2' ng-model="password2" placeholder='再次输入登录密码' />
                    </div>
                    <div class='form-group'>
                        <button class="btn btn-lg btn-block btn-success" ng-click="changePwd()">修改登录密码</button>
                    </div>
                </div>
            </a>
        </div>
        <hr>
        <div>
            <button class="btn btn-default btn-block" ng-click='gotoLogin()' ng-if="!user.loginExpire">去登录</button>
            <button class="btn btn-default btn-block" ng-click='gotoRegister()' ng-if="!user.loginExpire">注册，方便多终端访问</button>
            <button class="btn btn-default btn-block" ng-click='gotoMember(ms)' ng-repeat="ms in memberSchemas">补充【{{ms.title}}】信息</button>
            <button class="btn btn-default btn-block" ng-click='logout()' ng-if="user.loginExpire">退出登录</button>
        </div>
    </div>
    <script src="/static/js/require.js" defer async data-main="<?php echo auto_version('/views/alpha/site/fe/user/main-loader.js');?>"></script>
</body>

</html>