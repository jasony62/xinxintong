<div ng-controller='ctrlFeature'>
    <div class="panel panel-default">
        <div class="panel-heading">系统运行模式</div>
        <div class="panel-body">
            <div class='form-horizontal'>
                <div class='form-group'>
                    <label class='col-md-2 control-label'>文章评论</label>
                    <div class='col-md-10'>
                        <label class='checkbox-inline'>
                            <input type='checkbox' ng-true-value="'Y'" ng-false-value="'N'" ng-model='features.can_article_remark' ng-change="update('can_article_remark')">允许关注用户在文章后面发表评论（开通
                            <span style='color:red'>网页授权</span>接口才生效）</label>
                    </div>
                </div>
                <div class='form-group'>
                    <label class='col-md-2 control-label'>素材可见性</label>
                    <div class='col-md-10'>
                        <label class='checkbox-inline'>
                            <input type='checkbox' ng-model='features.matter_visible_to_creater' ng-true-value="'Y'" ng-false-value="'N'" ng-change="update('matter_visible_to_creater')">&nbsp;仅创建者和管理员可见</label>
                        <p class="help-block">设置此选项可限制编辑的素材其他人不可编辑和使用，包括：图文，文本，多图文，频道和链接。</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading">图文消息缺省头图</div>
        <div class="panel-body">
            <div style="width:182px;border:1px solid #CCC">
                <div style="height:100px;text-align:center;padding-top:32px" ng-if="!features.heading_pic">
                    <button class='btn btn-default' ng-click='setPic();'>
                        <span class='glyphicon glyphicon-picture'></span>选择图片</button>
                </div>
                <div style='position:relative' ng-if="features.heading_pic" ng-mouseenter='hover=true' ng-mouseleave='hover=false'>
                    <img name='pic' ng-src="{{features.heading_pic}}" width='180px' />
                    <button class='btn btn-default btn-sm' style='position:absolute;top:2px;left:2px' ng-if='hover' ng-click='setPic();'>
                        <span class='glyphicon glyphicon-picture'></span>
                    </button>
                    <button class='btn btn-default btn-sm' style='position:absolute;top:2px;right:2px' ng-if='hover' ng-click='removePic();'>
                        <span class='glyphicon glyphicon-trash'></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading">定制页面</div>
        <div class="panel-body">
            <table class='table table-bordered' style='margin:0'>
                <tr>
                    <td>引导关注页设置</td>
                    <td>通过OAuth判断用户为非关注用户时显示的页面。</td>
                    <td>
                        <a href='javascript:void(0)' ng-click="editPage($event,'follow_page_id')">编辑页面</a>
                        <a href='javascript:void(0)' ng-click="resetPage($event,'follow_page_id')" ng-show="features.follow_page_id!=='0'">重置页面</a>
                        <a href='javascript:void(0)' ng-click="previewFollow($event)" ng-show="features.follow_page_id!=='0'">预览</a>
                    </td>
                </tr>
                <tr>
                    <td>通用页头设置</td>
                    <td>用于给所有页面添加页头元素。</td>
                    <td>
                        <a href='javascript:void(0)' ng-click="editPage($event,'header_page_id')">编辑页面</a>
                    </td>
                </tr>
                <tr>
                    <td>通用页脚设置</td>
                    <td>用于给所有页面添加页脚元素。</td>
                    <td>
                        <a href='javascript:void(0)' ng-click="editPage($event,'footer_page_id')">编辑页面</a>
                    </td>
                </tr>
                <tr>
                    <td>提示在PC端完成。</td>
                    <td>某些与公众号用户互动的页面适合在PC端展现，可以在此处设置提示的内容。</td>
                    <td>
                        <a href='javascript:void(0)' ng-click="editPage($event,'shift2pc_page_id')">编辑页面</a>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div class="panel panel-default" ng-if='false'>
        <div class="panel-heading">认证用户管理</div>
        <div class="panel-body">
            <div class='form-horizontal'>
                <div class='form-group'>
                    <label class='col-md-2 control-label'>用户认证</label>
                    <div class='col-md-10'>
                        <label class='checkbox-inline'>
                            <input type='checkbox' ng-model='features.can_member' ng-true-value="'Y'" ng-false-value="'N'" ng-change="update('can_member')">提供用户注册功能。</label>
                    </div>
                </div>
                <div class='form-group'>
                    <label class='col-md-2 control-label'>用户卡</label>
                    <div class='col-md-10'>
                        <label class='checkbox-inline'>
                            <input type='checkbox' ng-model='features.can_member_card' ng-true-value="'Y'" ng-false-value="'N'" ng-change="update('can_member_card')">允许注册用户申请用户卡。</label>
                    </div>
                </div>
                <div class='form-group'>
                    <label class='col-md-2 control-label'>用户签到</label>
                    <div class='col-md-10'>
                        <label class='checkbox-inline'>
                            <input type='checkbox' ng-model='features.can_member_checkin' ng-true-value="'Y'" ng-false-value="'N'" ng-change="update('can_member_checkin')">提供注册用户签到功能。</label>
                    </div>
                </div>
                <div class='form-group'>
                    <label class='col-md-2 control-label'>用户积分</label>
                    <div class='col-md-10'>
                        <label class='checkbox-inline'>
                            <input type='checkbox' ng-model='features.can_member_credits' ng-true-value="'Y'" ng-false-value="'N'" ng-change="update('can_member_credits')">提供注册用户积分功能。</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading">公众号管理员</div>
        <div class="panel-body">
            <div class='form-horizontal'>
                <div class='form-group'>
                    <label class='col-md-2 control-label'>联系方式</label>
                    <div class='col-md-10'>
                        <input type='text' class='form-control' ng-model='features.admin_contact' tms-auto-update tms-wait=1000 tms-update="update('admin_contact')">
                    </div>
                </div>
                <div class='form-group'>
                    <label class='col-md-2 control-label'>邮箱</label>
                    <div class='col-md-10'>
                        <input type='text' class='form-control' ng-model='features.admin_email' tms-auto-update tms-wait=1000 tms-update="update('admin_email')">
                        <p class="help-block">若指定了公众号管理员邮箱，系统将用此邮箱向用户发送邮件。</p>
                    </div>
                </div>
                <div class='form-group'>
                    <label class='col-md-2 control-label'>口令</label>
                    <div class='col-md-10'>
                        <input type='password' class='form-control' ng-model='features.admin_email_pwd' ng-blur="update('admin_email_pwd')">
                    </div>
                </div>
                <div class='form-group'>
                    <label class='col-md-2 control-label'>SMTP</label>
                    <div class='col-md-10'>
                        <input type='text' class='form-control' ng-model='features.admin_email_smtp' tms-auto-update tms-wait=1000 tms-update="update('admin_email_smtp')">
                    </div>
                </div>
                <div class='form-group'>
                    <label class='col-md-2 control-label'>PORT</label>
                    <div class='col-md-10'>
                        <input type='text' class='form-control' ng-model='features.admin_email_port' tms-auto-update tms-wait=1000 tms-update="update('admin_email_port')">
                    </div>
                </div>
                <div class='form-group'>
                    <label class='col-md-2 control-label'>TLS</label>
                    <div class='col-md-10'>
                        <label class='checkbox-inline'>
                            <input type='checkbox' ng-model='features.admin_email_tls' ng-true-value="'Y'" ng-false-value="'N'" ng-change="update('admin_email_tls')">是</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/ng-template" id="preview.html">
        <div class="modal-header">
            <button class="close" type="button" ng-click="close()">×</button>
            <h5 class="modal-title">预览</h5>
        </div>
        <div class="modal-body" style="text-align:center">
            <iframe ng-src="{{page.src}}" style="border:1px solid #ccc;width:375px;height:667px"></iframe>
        </div>
        <div class="modal-footer">
            <button class="btn btn-default" ng-click="close()">关闭</button>
        </div>
    </script>
    <mediagallery box-id="{{features.mpid}}"></mediagallery>
</div>