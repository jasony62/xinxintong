<div class="col-md-12">
    <div id='coin-view'>
        <uib-tabset active="tabActive" classes="ng-cloak">
            <uib-tab index="0">
                <uib-tab-heading>积分规则</uib-tab-heading>
                <table class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>说明</th>
                            <th>积分</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="r in rules">
                            <td ng-bind="r.act"></td>
                            <td ng-bind="r.desc"></td>
                            <td>
                                <input type='text' ng-model="r.actor_delta">
                            </td>
                        </tr>
                    </tbody>
                </table>
                <button class='btn btn-success' ng-click="save()">保存</button>
            </uib-tab>
            <uib-tab index="1">
                <uib-tab-heading>积分日志</uib-tab-heading>
                <table class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th style='width:48px'>序号</th>
                            <th>时间</th>
                            <th>用户</th>
                            <th>获得积分原因</th>
                            <th>获得积分</th>
                            <th>获得总积分</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="log in logs">
                            <td>{{$index+1}}</td>
                            <td>{{log.occur_at*1000|date:'yy-MM-dd hh:mm'}}</td>
                            <td>{{log.nickname}}</td>
                            <td>{{log.act}}</td>
                            <td>{{log.delta}}</td>
                            <td>{{log.user_total_coin}}</td>
                        </tr>
                    </tbody>
                </table>
                <div class='form-group form-inline'>
                    <span class="pull-left">总数：{{page.total}}</span>
                    <ul class="pull-right" uib-pagination style="margin:0;vertical-align:bottom;cursor:pointer" ng-show="page.total>page.size" boundary-links="true" total-items="page.total" max-size="7" items-per-page="page.size" rotate="false" ng-model="page.at" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" ng-change="fetchLogs()"></ul>
                </div>
            </uib-tab>
        </uib-tabset>
    </div>
</div>
