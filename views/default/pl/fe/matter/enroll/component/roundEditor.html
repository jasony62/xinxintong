<div class="modal-header">
    <button class="close" type="button" ng-click="close()">×</button>
    <h5 class="modal-title ">轮次</h5>
</div>
<div class="modal-body ">
    <form class="form-horizontal">
        <div class="form-group">
            <label class="col-md-3 control-label">名称</label>
            <div class="col-md-9">
                <input type='text' class="form-control" ng-model='round.title'>
            </div>
        </div>
        <div>
            <label class="col-md-3 control-label">用途</label>
            <div class="col-md-9">
                <div>
                    <label class='radio-inline'><input name='purpose' type='radio' value='C' ng-model="round.purpose">常规</label>
                    <label class='radio-inline'><input name='purpose' type='radio' value='B' ng-model="round.purpose">基准</label>
                    <label class='radio-inline'><input name='purpose' type='radio' value='S' ng-model="round.purpose">汇总</label>
                </div>
                <div class='help-block'>
                    【基准】轮次用于按用户设定完成目标，常规轮次可以和基准轮次进行比较。基准轮次的得分不计入用户总分。
                </div>
                <div class='help-block'>
                    【汇总】轮次用于将其开始时间之后到下一个汇总轮次之间的轮次的填写数据进行汇总。基准轮次的得分不计入用户总分。
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="col-md-3 control-label">状态</label>
            <div class="col-md-9">
                <p class="form-control-static">{{roundState[round.state]}}</p>
            </div>
        </div>
        <div class='form-group'>
            <label class='col-md-3 control-label'>开始时间</label>
            <div class="col-md-9">
                <tms-datepicker class='tms-datepicker' tms-title='开始时间' tms-obj="round" tms-date="round.start_at" tms-state="start_at"></tms-datepicker>
            </div>
        </div>
        <div class='form-group'>
            <label class='col-md-3 control-label'>停止提交</label>
            <div class="col-md-9">
                <tms-datepicker class='tms-datepicker' tms-title='停止提交' tms-obj="round" tms-date="round.end_at" tms-state="end_at"></tms-datepicker>
            </div>
        </div>
        <div class='form-group' ng-if="missionRounds&&missionRounds.length">
            <label class='col-md-3 control-label'>关联项目轮次</label>
            <div class="col-md-9">
                <select class='form-control' ng-model="round.mission_rid" ng-options="rnd.rid as rnd.title for rnd in missionRounds">
                    <option value=''>未指定</option>
                </select>
            </div>
        </div>
        <div class='form-group' ng-if="round.rid&&entry">
            <label class='col-md-3 control-label'>轮次填写链接</label>
            <div class="col-md-9">
                <div class='input-group'>
                    <div class='form-control' style='height:auto;word-break:break-all' ng-bind='entry.url'></div>
                    <span class='input-group-addon'>
                    <a class='btn btn-default' ng-href="{{entry.url}}" target='_blank' title='打开'><i class='glyphicon glyphicon-open'></i></a>
                </span>
                </div>
            </div>
        </div>
        <div class='form-group' ng-if="round.rid&&entry">
            <label class='col-md-3 control-label'>轮次填写二维码</label>
            <div class='col-md-9'>
                <div>
                    <span><img style='width:135px;height:135px;' ng-src="{{entry.qrcode}}"></span>
                    <button class='btn btn-default' ng-click="downloadQrcode(entry.qrcode)">下载</button>
                </div>
            </div>
        </div>
    </form>
</div>
<div class="modal-footer">
    <button class="btn btn-success pull-left" ng-click="start()" ng-if='round.state==0||round.state==2'>启用</button>
    <button class="btn btn-default pull-left" ng-click="stop()" ng-if='round.state==1'>停用</button>
    <button class="btn btn-success" ng-click="ok() ">保存</button>
</div>