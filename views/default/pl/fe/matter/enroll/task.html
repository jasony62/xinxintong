<div class="col-md-8 col-md-offset-2">
    <uib-tabset active="tabActive">
        <uib-tab index="1">
            <uib-tab-heading>回答</uib-tab-heading>
            <div class='panel panel-default' ng-controller="ctrlTaskAnswer">
                <div class='panel-body'>
                    <div class='list-group'>
                        <div class='list-group-item' ng-repeat="config in configs">
                            <div class='form-group'>
                                <label>回答题目</label>
                                <div tms-array-checkbox model="config.schemas">
                                    <div class='checkbox' ng-repeat="schema in answerSchemas">
                                        <label class='checkbox-inline'>
                                            <input type='checkbox' value='{{::schema.id}}'><span>{{::schema.title}}</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class='form-group'>
                                <div class='form-inline'>
                                    <span>每人回答数量</span>
                                    <input type='text' class='form-control' ng-model="config.limit.num" placeholder="输入数量">
                                </div>
                            </div>
                            <div class='form-group'>
                                <div class='form-inline'>
                                    <span>回答开始时间</span>
                                    <select class='form-control' ng-model="config.start.time.mode">
                                        <option value=''>不设置</option>>
                                        <option value='after_round_start_at'>填写轮次开始时间后</option>
                                    </select>
                                    <select class='form-control' ng-model="config.start.time.unit">
                                        <option value=''>不设置</option>>
                                        <option value='hour'>小时</option>
                                    </select>
                                    <input type='text' class='form-control' ng-model="config.start.time.value" placeholder="输入需要的时间">
                                </div>
                            </div>
                            <div class='form-group'>
                                <div class='form-inline'>
                                    <span>回答结束时间</span>
                                    <select class='form-control' ng-model="config.end.time.mode">
                                        <option value=''>不设置</option>>
                                        <option value='after_round_start_at'>填写轮次开始时间后</option>
                                    </select>
                                    <select class='form-control' ng-model="config.end.time.unit">
                                        <option value=''>不设置</option>>
                                        <option value='hour'>小时</option>
                                    </select>
                                    <input type='text' class='form-control' ng-model="config.end.time.value" placeholder="输入需要的时间">
                                </div>
                            </div>
                            <div class='form-group' ng-repeat="vg in config.role.groups">
                                <div class='form-inline'>
                                    <span>进行回答的分组</span>
                                    <select class='form-control' ng-model="vg.do">
                                        <option value=''>不指定</option>
                                        <option ng-repeat="group in app.groups" value="{{group.round_id}}">{{group.title}}</option>
                                    </select>
                                    <span>获得回答的分组</span>
                                    <select class='form-control' ng-model="vg.get">
                                        <option value=''>不指定</option>
                                        <option ng-repeat="group in app.groups" value="{{group.round_id}}">{{group.title}}</option>
                                    </select>
                                    <button class='btn btn-default' ng-click="delAnswerGroup(config,vg)"><span class='glyphicon glyphicon-remove'></span></button>
                                </div>
                            </div>
                            <button class='btn btn-default' ng-click="addAnswerGroup(config)">添加分组设置</button>
                            <hr>
                            <button class='btn btn-default' ng-click="delConfig(config)">删除</button>
                            <button class='btn' ng-class="{'btn-default':configsModified[config.id]===false,'btn-success':configsModified[config.id]!==false}" ng-click="save(config)">保存</button>
                        </div>
                    </div>
                    <div>
                        <button class='btn btn-default' ng-click="addConfig()">添加回答环节</button>
                    </div>
                </div>
            </div>
        </uib-tab>
        <uib-tab index="2">
            <uib-tab-heading>投票</uib-tab-heading>
            <div class='panel panel-default' ng-controller="ctrlTaskVote">
                <div class='panel-body'>
                    <div class='list-group'>
                        <div class='list-group-item' ng-repeat="config in configs">
                            <div class='form-group'>
                                <label>投票题目</label>
                                <div tms-array-checkbox model="config.schemas">
                                    <div class='checkbox' ng-repeat="schema in votingSchemas">
                                        <label class='checkbox-inline'>
                                            <input type='checkbox' value='{{::schema.id}}'><span>{{::schema.title}}</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class='form-group'>
                                <div class='form-inline'>
                                    <span>每人投票数量</span>
                                    <input type='text' class='form-control' ng-model="config.limit.num" placeholder="输入数量">
                                </div>
                            </div>
                            <div class='form-group'>
                                <div class='form-inline'>
                                    <span>投票开始时间</span>
                                    <select class='form-control' ng-model="config.start.time.mode">
                                        <option value=''>不设置</option>>
                                        <option value='after_round_start_at'>填写轮次开始时间后</option>
                                    </select>
                                    <select class='form-control' ng-model="config.start.time.unit">
                                        <option value=''>不设置</option>>
                                        <option value='hour'>小时</option>
                                    </select>
                                    <input type='text' class='form-control' ng-model="config.start.time.value" placeholder="输入需要的时间">
                                </div>
                            </div>
                            <div class='form-group'>
                                <div class='form-inline'>
                                    <span>投票结束时间</span>
                                    <select class='form-control' ng-model="config.end.time.mode">
                                        <option value=''>不设置</option>>
                                        <option value='after_round_start_at'>填写轮次开始时间后</option>
                                    </select>
                                    <select class='form-control' ng-model="config.end.time.unit">
                                        <option value=''>不设置</option>>
                                        <option value='hour'>小时</option>
                                    </select>
                                    <input type='text' class='form-control' ng-model="config.end.time.value" placeholder="输入需要的时间">
                                </div>
                            </div>
                            <div class='form-group' ng-repeat="vg in config.role.groups">
                                <div class='form-inline'>
                                    <span>进行投票的分组</span>
                                    <select class='form-control' ng-model="vg.do">
                                        <option value=''>不指定</option>
                                        <option ng-repeat="group in app.groups" value="{{group.round_id}}">{{group.title}}</option>
                                    </select>
                                    <span>获得投票的分组</span>
                                    <select class='form-control' ng-model="vg.get">
                                        <option value=''>不指定</option>
                                        <option ng-repeat="group in app.groups" value="{{group.round_id}}">{{group.title}}</option>
                                    </select>
                                    <button class='btn btn-default' ng-click="delVoteGroup(config,vg)"><span class='glyphicon glyphicon-remove'></span></button>
                                </div>
                            </div>
                            <button class='btn btn-default' ng-click="addVoteGroup(config)">添加分组设置</button>
                            <hr>
                            <button class='btn btn-default' ng-click="delConfig(config)">删除</button>
                            <button class='btn' ng-class="{'btn-default':configsModified[config.id]===false,'btn-success':configsModified[config.id]!==false}" ng-click="save(config)">保存</button>
                        </div>
                    </div>
                    <div>
                        <button class='btn btn-default' ng-click="addConfig()">添加投票环节</button>
                    </div>
                </div>
            </div>
        </uib-tab>
        <uib-tab index="3">
            <uib-tab-heading>打分</uib-tab-heading>
            <div class='panel panel-default' ng-controller="ctrlTaskScore">
                <div class='panel-body'>
                    <div class='list-group'>
                        <div class='list-group-item' ng-repeat="config in configs">
                            <div class='form-group'>
                                <label>打分题目</label>
                                <div tms-array-checkbox model="config.schemas">
                                    <div class='checkbox' ng-repeat="schema in scoreSchemas">
                                        <label class='checkbox-inline'>
                                            <input type='checkbox' value='{{::schema.id}}'><span>{{::schema.title}}</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class='form-group'>
                                <div class="input-group-btn">
                                    <button class='btn btn-default' ng-click="setScoreApp(config)">设置打分活动</button>
                                    <button ng-if="config.scoreApp" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                        <span class="caret"></span>
                                        <span class="sr-only">Toggle Dropdown</span>
                                    </button>
                                    <ul class="dropdown-menu">
                                        <li><a href='/rest/pl/fe/matter/enroll?id={{config.scoreApp.id}}&site={{app.siteid}}' target='_blank'>查看活动</a></li>
                                        <li><a href ng-click="unlinkScoreApp(config)">解除关联</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class='form-group'>
                                <div class='form-inline'>
                                    <span>打分开始时间</span>
                                    <select class='form-control' ng-model="config.start.time.mode">
                                        <option value=''>不设置</option>>
                                        <option value='after_round_start_at'>填写轮次开始时间后</option>
                                    </select>
                                    <select class='form-control' ng-model="config.start.time.unit">
                                        <option value=''>不设置</option>>
                                        <option value='hour'>小时</option>
                                    </select>
                                    <input type='text' class='form-control' ng-model="config.start.time.value" placeholder="输入需要的时间">
                                </div>
                            </div>
                            <div class='form-group'>
                                <div class='form-inline'>
                                    <span>打分结束时间</span>
                                    <select class='form-control' ng-model="config.end.time.mode">
                                        <option value=''>不设置</option>>
                                        <option value='after_round_start_at'>填写轮次开始时间后</option>
                                    </select>
                                    <select class='form-control' ng-model="config.end.time.unit">
                                        <option value=''>不设置</option>>
                                        <option value='hour'>小时</option>
                                    </select>
                                    <input type='text' class='form-control' ng-model="config.end.time.value" placeholder="输入需要的时间">
                                </div>
                            </div>
                            <div class='form-group' ng-repeat="vg in config.role.groups">
                                <div class='form-inline'>
                                    <span>进行打分的分组</span>
                                    <select class='form-control' ng-model="vg.do">
                                        <option value=''>不指定</option>
                                        <option ng-repeat="group in app.groups" value="{{group.round_id}}">{{group.title}}</option>
                                    </select>
                                    <span>获得打分的分组</span>
                                    <select class='form-control' ng-model="vg.get">
                                        <option value=''>不指定</option>
                                        <option ng-repeat="group in app.groups" value="{{group.round_id}}">{{group.title}}</option>
                                    </select>
                                    <button class='btn btn-default' ng-click="delScoreGroup(config,vg)"><span class='glyphicon glyphicon-remove'></span></button>
                                </div>
                            </div>
                            <button class='btn btn-default' ng-click="addScoreGroup(config)">添加分组设置</button>
                            <hr>
                            <button class='btn btn-default' ng-click="delConfig(config)">删除</button>
                            <button class='btn' ng-class="{'btn-default':configsModified[config.id]===false,'btn-success':configsModified[config.id]!==false}" ng-click="save(config)">保存</button>
                        </div>
                    </div>
                    <div>
                        <button class='btn btn-default' ng-click="addConfig()">添加打分环节</button>
                    </div>
                </div>
            </div>
        </uib-tab>
    </uib-tabset>
</div>