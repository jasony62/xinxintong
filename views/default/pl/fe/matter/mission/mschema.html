<div class="col-md-12">
    <div ng-if='mschemas.length===0'>
        <div class='alert alert-info'>请<a href='' class="alert-link" ng-click="createMschema()">创建</a>项目联系人通讯录</div>
    </div>
    <div ng-if='mschemas.length'>
        <div class='form-group form-inline'>
            <div class='input-group'>
                <select class='form-control' ng-options="mschema.title for mschema in mschemas" ng-model="selected.mschema" ng-change="chooseMschema()"></select>
                <div class='input-group-btn'>
                    <a class='btn btn-default' href="/rest/pl/fe/site/mschema?site={{selected.mschema.siteid}}#{{selected.mschema.id}}" target='_self'><span class='glyphicon glyphicon-edit'></span></a>
                    <button class="btn btn-default" ng-click='removeMschema()'>
                        <span class="glyphicon glyphicon-remove"></span>
                    </button>
                </div>
            </div>
            <div class='form-group'>
                <select class='form-control' ng-model='page.searchBy' ng-options='s.v as s.n for s in searchBys'></select>
            </div>
            <div class='form-group' style='max-width:200px'>
                <div class="input-group">
                    <input type='text' class='form-control' ng-model='page.keyword' placeholder='搜索条件' ng-keyup='keywordKeyup($event)'>
                    <div class="input-group-btn">
                        <button class="btn btn-default" ng-click='doSearch(1)'>
                            <span class="glyphicon glyphicon-search"></span>
                        </button>
                    </div>
                </div>
            </div>
            <div class='form-group'>
                <button class='btn btn-default' ng-click="createMschema()">添加通讯录</button>
            </div>
            <div class='form-group' ng-if="selected.mschema.require_invite==='Y'">
                <a class='btn btn-default' href="/rest/pl/fe/site/mschema?site={{selected.mschema.siteid}}#{{selected.mschema.id}}" target='_self'>查看邀请码</a>
            </div>
        </div>
        <div>
            <table class='table table-bordered'>
                <thead>
                    <tr>
                        <th style='width:120px'>填写日期</th>
                        <th style='width:80px'>通过审核</th>
                        <th ng-if='selected.mschema.attr_name[0]==0'>姓名</th>
                        <th ng-if='selected.mschema.attr_mobile[0]==0'>手机号</th>
                        <th ng-if='selected.mschema.attr_email[0]==0'>电子邮件</th>
                        <th style='width:80px' ng-if='selected.mschema.attr_email[0]==0&&selected.mschema.attr_email[4]==1'>邮箱验证</th>
                        <th ng-repeat='ea in selected.mschema.extattr'>{{ea.label}}</th>
                        <th style='width:48px'>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat='m in members'>
                        <td>{{m.create_at*1000|date:'yy-MM-dd HH:mm'}}</td>
                        <td>{{m.verified==='Y'?'是':'否'}}</td>
                        <td ng-if='selected.mschema.attr_name[0]==0'>{{m.name}}</td>
                        <td ng-if="selected.mschema.attr_mobile[0]==0">{{m.mobile}}</td>
                        <td ng-if="selected.mschema.attr_email[0]==0">{{m.email}}</td>
                        <td ng-if="selected.mschema.attr_email[0]==0&&schema.attr_email[4]==1">{{m.email_verified==='Y'?'通过':'未通过'}}</td>
                        <td ng-repeat='ea in selected.mschema.extattr'>{{m.extattr[ea.id]}}</td>
                        <td>
                            <a href='' ng-click='editMember(m)'>修改</a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class='form-group'>
                <div class='pl-pagination'>
                    <span>总数：{{page.total}}</span>
                    <ul uib-pagination class='pull-right' ng-if='page.total>page.size' boundary-links="true" total-items="page.total" max-size="7" items-per-page="page.size" rotate="false" ng-model="page.at" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" ng-change="doSearch()"></ul>
                </div>
            </div>
        </div>
    </div>
</div>