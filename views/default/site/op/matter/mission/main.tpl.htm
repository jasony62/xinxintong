<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta content="width=device-width,user-scalable=no,initial-scale=1.0" name="viewport">
    <base href="/" />
    <title>
        <?php TPL::pt('title');?>
    </title>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/views/default/site/op/matter/mission/main.css?_=2" rel="stylesheet">
</head>

<body ng-controller="ctrlMain">
    <div class='container ng-cloak' ng-cloak>
        <div id='times' class='row'>
            <div ng-repeat="time in times">
                <div class='col-xs-2 timeline' ng-class="{'pending':time>currentTime}">
                    <div class='date' ng-bind="time*1000|date:'MM-dd'"></div>
                    <div class='time' ng-bind="time*1000|date:'HH:mm'"></div>
                </div>
                <div class='col-xs-10'>
                    <div ng-repeat="matter in matters[time]" ng-switch on="matter.type">
                        <div class='thumbnail track' ng-class="matter.indicator.state">
                            <div class='title' ng-bind="matter.title"></div>
                            <div class='row' ng-switch-when="enroll">
                                <div class='col-xs-6'>
                                    <label>用户数量</label>
                                    <div ng-bind="matter.opData[0].enrollee_num||0"></div>
                                </div>
                                <div class='col-xs-6'>
                                    <label>记录数量</label>
                                    <div ng-bind="matter.opData[0].total||0"></div>
                                </div>
                                <div class='col-xs-6' ng-if="matter.indicator.remark">
                                    <label>留言数量</label>
                                    <div ng-bind="matter.opData[0].remark_total||0"></div>
                                </div>
                                <div class='col-xs-12' ng-if="matter.indicator.end_submit" ng-switch on="matter.indicator.end_submit">
                                    <div ng-switch-when="R">！本活动将于<span style='color:orangered;'>{{matter.end_submit_at*1000|date:'MM-dd HH:mm'}}</span>停止提交</div>
                                    <div ng-switch-when="E">！本活动已于<span style='color:orangered;'>{{matter.end_submit_at*1000|date:'MM-dd HH:mm'}}</span>停止提交</div>
                                </div>
                                <div class='col-xs-12' ng-if="matter.indicator.end" ng-switch on="matter.indicator.end">
                                    <div ng-switch-when="R">！本活动将于<span style='color:orangered;'>{{matter.end_at*1000|date:'MM-dd HH:mm'}}</span>结束</div>
                                    <div ng-switch-when="E">！本活动已于<span style='color:orangered;'>{{matter.end_at*1000|date:'MM-dd HH:mm'}}</span>结束</div>
                                </div>
                            </div>
                            <div class='row' ng-switch-when="signin">
                                <div ng-repeat="rnd in matter.opData">
                                    <div class='col-xs-6'>
                                        <label ng-bind="rnd.title"></label>
                                        <div ng-bind="rnd.total"></div>
                                    </div>
                                    <div class='col-xs-6'>
                                        <label>迟到数量</label>
                                        <div ng-bind="rnd.late"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <nav class="navbar navbar-default navbar-fixed-bottom" ng-if="mission.userApp">
        <form class="navbar-form navbar-right">
            <button class='btn btn-default' ng-click="chooseUser()">用户详情 <span class='caret'></span></button>
        </form>
    </nav>
    <script type="text/ng-template" id="chooseUser.html">
        <div class="modal-body ">
            <div class="radio" ng-repeat="user in users">
                <label>
                    <input type='radio' name='user' value="{{$index}}" ng-model='chosen.index'>{{user.nickname}}</label>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-default" ng-click="cancel() ">关闭</button>
            <button class="btn btn-default" ng-click="ok() ">确定</button>
        </div>
    </script>
    <script src="/static/js/xxt.ui.error.js"></script>
    <script src="/static/js/angular.min.js"></script>
    <script src="/static/js/angular-sanitize.min.js"></script>
    <script src="/static/js/ui-bootstrap-tpls.min.js"></script>
    <script src="/static/js/require.js" defer async data-main="/views/default/site/op/matter/mission/main-loader.js?_=1"></script>
</body>

</html>